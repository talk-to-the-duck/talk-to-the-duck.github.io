<!doctype html><html lang=fr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Comment faire évoluer une application pour la rendre plus robuste et maintenable - Mise en place du CICD - Talk To The Duck</title><link rel=apple-touch-icon href=/images/icons/icon-180x180.png sizes=180x180>
<link rel=icon href=/images/icons/icon-32x32.png sizes=32x32 type=image/png>
<link rel=icon href=/images/icons/icon-16x16.png sizes=16x16 type=image/png>
<link rel=icon href=/images/icons/favicon.ico>
<link rel=manifest href=/fr/manifest.json>
<meta name=keywords content>
<meta name=description content><meta itemprop=name content="Comment faire évoluer une application pour la rendre plus robuste et maintenable - Mise en place du CICD">
<meta itemprop=description content><meta itemprop=datePublished content="2023-01-15T00:00:00+00:00">
<meta itemprop=dateModified content="2024-07-19T23:07:50+02:00">
<meta itemprop=wordCount content="1327">
<meta itemprop=keywords content=","><meta property="og:title" content="Comment faire évoluer une application pour la rendre plus robuste et maintenable - Mise en place du CICD">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="/fr/posts/how-to-evolve-application-cicd/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-01-15T00:00:00+00:00">
<meta property="article:modified_time" content="2024-07-19T23:07:50+02:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Comment faire évoluer une application pour la rendre plus robuste et maintenable - Mise en place du CICD">
<meta name=twitter:description content>
<meta name=robots content="index, follow"><link rel=stylesheet href=/css/main.min.bdac26feededc335ec4311c668376189bbfe162d3dc6063df0d592d8d855725c.css integrity="sha256-vawm/u3twzXsQxHGaDdhibv+Fi09xgY98NWS2NhVclw=" crossorigin=anonymous><link rel=stylesheet href=/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css integrity="sha256-PSKHlLztu/oEEr64+8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin=anonymous></head>
<body><script>const items=['mode','palette'];items.forEach(function(a){const b=localStorage.getItem('hbs-'+a);b&&document.body.parentElement.setAttribute('data-'+a,b)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
<div class=container>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand me-3" href=/fr/><img class=logo alt=Logo src=/images/ttd-logo.webp loading=lazy width=136 height=136>
Talk To The Duck
</a>
<div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare>
<div class=offcanvas-header>
<h3 class=offcanvas-title>Share</h3>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class=offcanvas-body>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=Comment%20faire%20%c3%a9voluer%20une%20application%20pour%20la%20rendre%20plus%20robuste%20et%20maintenable%20-%20Mise%20en%20place%20du%20CICD&url=%2ffr%2fposts%2fhow-to-evolve-application-cicd%2f">
<i class="fab fa-fw fa-twitter"></i> Twitter
</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=%2ffr%2fposts%2fhow-to-evolve-application-cicd%2f">
<i class="fab fa-fw fa-facebook-f"></i> Facebook
</a>
</div>
</div>
<button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i>
</button>
<div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings>
<div class=offcanvas-header>
<h3 class=offcanvas-title>Réglages</h3>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class="offcanvas-body d-flex flex-column"><section class=setting>
<form class=row>
<div class=col-auto>
<label for=fontSize class=form-label><i class="fas fa-fw fa-language"></i> Language</label>
</div>
<div class="col-auto ms-auto">
<div class=dropdown>
<a class="btn btn-sm btn-outline-primary dropdown-toggle" href=# id=languageDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
Français
</a>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby=languageDropdown><li><a class=dropdown-item href=/en/>English</a></li><li><a class=dropdown-item href=/it/>Italiano</a></li></ul>
</div>
</div>
</form>
</section>
<section class=setting>
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-adjust"></i> Mode</label>
</div>
<div class="col-auto ms-auto">
<div class="form-check form-switch">
<input class=form-check-input type=checkbox id=modeSwitcher>
</div>
</div>
</form>
</section>
<section class=setting>
<form class="font-size-switcher-form row">
<div class=col-auto>
<label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Taille de la Police</label>
</div>
<div class="col-auto ms-auto">
<input type=range class=form-range min=-2 max=2 id=fontSize>
</div>
</form>
</section>
<section class="setting palettes">
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-palette"></i> Palette</label>
</div>
<div class="col-auto ms-auto">
<a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker>
<i class="fas fa-eye-dropper"></i>
</a>
</div>
</form>
<div class="mt-2 d-flex visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=Bleu class="btn btn-sm palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label="Blue Gris" class="btn btn-sm palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=Marron class="btn btn-sm palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=Cyan class="btn btn-sm palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=Vert class="btn btn-sm palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=Indigo class="btn btn-sm palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=Orange class="btn btn-sm palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=Rose class="btn btn-sm palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=Mauve class="btn btn-sm palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=Rouge class="btn btn-sm palette" data-palette=red>
</button><button type=button id=palette-teal aria-label="Bleu Turquoise" class="btn btn-sm palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=Jaune class="btn btn-sm palette" data-palette=yellow>
</button></div>
</section>
<section class="setting actions d-flex justify-content-around mt-auto overflow-auto">
<a role=button class="action action-reload-page">
<span class=action-icon><i class="fas fa-2x fa-redo-alt"></i></span> Reload
</a>
<a role=button class="action action-copy-url">
<span class=action-icon><i class="fas fa-2x fa-link"></i></span> Copier URL
</a><a class="action action-social-share" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share">
<span class=action-icon><i class="fas fa-2x fa-share-alt"></i></span> Share
</a></section>
</div>
</div>
<div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent>
<form class="search-bar my-1" action=/fr/search>
<div class="input-group input-group-sm">
<span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control rounded-pill" name=q type=search aria-label=Search>
</div>
</form>
<ul class="navbar-nav ms-auto"><li class=nav-item>
<a class=nav-link href=/fr/series/>
<i class="fas fa-fw fa-columns"></i>Séries
</a>
</li><li class=nav-item>
<a class=nav-link href=/fr/archives/>
<i class="fas fa-fw fa-file-archive"></i>Archives
</a>
</li><li class=nav-item>
<a class=nav-link href=/fr/categories/>
<i class="fas fa-fw fa-folder"></i>Catégories
</a>
</li><li class=nav-item>
<a class=nav-link href=/fr/tags/>
<i class="fas fa-fw fa-tags"></i>Tags
</a>
</li><li class=nav-item>
<a class=nav-link href=/>
</a>
</li></ul>
</div>
</div>
</nav>
</header>
<main role=main class=container>
<div class="row content">
<div class=col-lg-8>
<div class=container><nav class="row card component" aria-label=breadcrumb>
<div class=card-body>
<ol class=breadcrumb><li class=breadcrumb-item><a href=/fr/>Accueil</a></li><li class=breadcrumb-item><a href=/fr/posts/>Articles</a></li><li class="breadcrumb-item active">Comment Faire Évoluer Une Application Pour La Rendre Plus Robuste Et Maintenable - Mise en Place Du CICD</li></ol>
</div>
</nav><article class="row card component mb-4 post"><div class=post-panel-wrapper>
<div class="d-flex flex-column component rounded post-panel">
<a class="action action-panel-toggler" role=button title="Panel toggler">
<i class="fas fa-fw fa-chevron-circle-down"></i>
</a>
<a id=sidebarToggler class="action d-none d-lg-block" role=button title="Sidebar toggler">
<i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i>
</a>
<div class="post-translations nav-item dropdown dropstart action">
<a class="nav-link p-0" data-bs-toggle=dropdown href=# role=button aria-haspopup=true aria-expanded=false aria-label="Translations dropdown menu" title=Translations>
<i class="fas fa-fw fa-language"></i>
</a>
<div class=dropdown-menu><a class="dropdown-item post-translation" href=/en/posts/how-to-evolve-application-cicd/>English</a></div>
</div>
<a class=action href=#post-copyright role=button aria-label=Copyright title=Copyright>
<i class="fas fa-fw fa-copyright"></i>
</a>
<a class=action href=#post-comments role=button aria-label=Comments title=Comments>
<i class="fas fa-fw fa-comments"></i>
</a>
<a class=action data-bs-toggle=offcanvas href=#offcanvasTOC aria-controls=offcanvasTOC role=button title="Table of contents">
<i class="fas fa-fw fa-list-alt"></i>
</a>
</div>
</div>
<div class=card-header>
<h1 class="card-title post-title">Comment Faire Évoluer Une Application Pour La Rendre Plus Robuste Et Maintenable - Mise en Place Du CICD
</h1>
</div>
<div class=card-body><div class=post-meta>
<span class=post-date title="created on 2024-07-19 21:07:50 +0000 UTC.">
19-07-2024
</span><span class=post-reading-time>
7 min de lecture
</span><span class=post-taxonomies><a href=/fr/categories/qualit%C3%A9/ class="badge rounded-pill post-taxonomy">qualité</a><a href=/fr/categories/test/ class="badge rounded-pill post-taxonomy">test</a><a href=/fr/categories/cicd/ class="badge rounded-pill post-taxonomy">CICD</a><a href=/fr/series/comment-faire-%C3%A9voluer-une-application-pour-la-rendre-plus-robuste-et-maintenable/ class="badge rounded-pill post-taxonomy"> Comment faire évoluer une application pour la rendre plus robuste et maintenable</a></span>
</div>
<div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasTOC aria-labelledby=offcanvasTOCLabel>
<div class=offcanvas-header>
<h2 class=offcanvas-title id=offcanvasTOCLabel>Sommaire</h5>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class=offcanvas-body>
<nav id=TableOfContents>
<ul>
<li><a href=#préambule>Préambule</a></li>
<li><a href=#quest-ce-que-le-cicd->Qu&rsquo;est-ce que le CICD ?</a></li>
<li><a href=#quels-outils-cicd->Quels outils CICD ?</a></li>
<li><a href=#mise-en-place-de-notre-cicd>Mise en place de notre CICD</a>
<ul>
<li><a href=#notre-pipeline-souhaité>Notre pipeline souhaité</a></li>
<li><a href=#implémentation-avec-circleci>Implémentation avec CircleCI</a></li>
<li><a href=#mise-en-oeuvre-avec-les-actions-github>Mise en oeuvre avec les actions GitHub</a></li>
<li><a href=#création-de-jobs>Création de jobs</a></li>
</ul>
</li>
<li><a href=#résumé>Résumé</a></li>
</ul>
</nav>
</div>
</div><div class="post-content mb-3"><h2 id=préambule>Préambule<a class="anchor ms-1" href=#préambule><i class="fas fa-link"></i></a></h2>
<p>Dans le dernier article, nous avons décrit les tests ajoutés à notre projet.
Ces tests sont utiles pour vérifier notre développement localement puisque nous utilisons le TDD. Mais ils sont aussi utiles pour vérifier s&rsquo;il y a des régressions.
Dans cet article, nous allons</p>
<ul>
<li>Définir ce qu&rsquo;est le CICD.</li>
<li>Montrer comment ajouter les paramètres CICD à notre projet.</li>
</ul>
<h2 id=quest-ce-que-le-cicd->Qu&rsquo;est-ce que le CICD ?<a class="anchor ms-1" href=#quest-ce-que-le-cicd-><i class="fas fa-link"></i></a></h2>
<p>L&rsquo;acronyme CICD signifie Continuous Integration Continuous Delivery (intégration continue, livraison continue).
L&rsquo;acronyme CICDCD signifie Continuous Integration Continuous Delivery Continuous Deployment (intégration continue, livraison continue, déploiement continu).</p>
<p>Lorsque nous parlons de CICD (ou CICDCD), nous faisons souvent référence aux pipelines.
Un pipeline CICD définit un processus dans lequel certaines étapes sont exécutées l&rsquo;une après l&rsquo;autre, dans le but de construire et de vérifier l&rsquo;application avant de la livrer et de la déployer.</p>
<h2 id=quels-outils-cicd->Quels outils CICD ?<a class="anchor ms-1" href=#quels-outils-cicd-><i class="fas fa-link"></i></a></h2>
<p>Il existe quelques outils pour exécuter le CICD ; nous pouvons citer :</p>
<ul>
<li>Gitlab-ci</li>
<li>CircleCI</li>
<li>GitHub Action</li>
<li>Jenkins</li>
</ul>
<p>Pour les projets open source comme le nôtre, il est plus facile d&rsquo;utiliser un outil de CICD intégré dans un service d&rsquo;hébergement et de gestion de développement logiciel comme GitLab ou GitHub.
C&rsquo;est pourquoi nous préférons utiliser GitLab, CircleCi ou GitHub Actions, car Jenkins nécessite un déploiement, une gestion et des ressources matérielles distincts.</p>
<p>Nous souhaitons également utiliser un service gratuit, c&rsquo;est pourquoi nous n&rsquo;utilisons pas de CI Gitlab ; car nous ne pouvons plus pousser le rapport de Gitlab vers Github avec l&rsquo;offre gratuite.</p>
<p>Dans ce billet, nous allons détailler ces solutions mais nous n&rsquo;en implémenterons que deux :</p>
<ul>
<li>CircleCI</li>
<li>Action GitHub</li>
</ul>
<h2 id=mise-en-place-de-notre-cicd>Mise en place de notre CICD<a class="anchor ms-1" href=#mise-en-place-de-notre-cicd><i class="fas fa-link"></i></a></h2>
<h3 id=notre-pipeline-souhaité>Notre pipeline souhaité<a class="anchor ms-1" href=#notre-pipeline-souhaité><i class="fas fa-link"></i></a></h3>
<p>A travers notre premier pipeline, nous voulons valider :</p>
<ul>
<li>construire l&rsquo;application.</li>
<li>vérifier que le code est formaté.</li>
<li>vérifier la non-régression du code par l&rsquo;exécution de tests.</li>
</ul>
<p>Nous voulons également que le pipeline soit exécuté à chaque commit sur la branche <em>develop</em> et les branches CI (avec le préfixe ci_).
Nous pourrions ajouter d&rsquo;autres types de branches : feature(feat/), fix (fix/), documentation (docs/)</p>
<h3 id=implémentation-avec-circleci>Implémentation avec CircleCI<a class="anchor ms-1" href=#implémentation-avec-circleci><i class="fas fa-link"></i></a></h3>
<h4 id=première-connexion>Première connexion<a class="anchor ms-1" href=#première-connexion><i class="fas fa-link"></i></a></h4>
<p>CircleCI est une plateforme de CICD qui a un plan gratuit ;
Pour pouvoir utiliser CircleCI, nous devons :</p>
<ul>
<li>
<p>Créer un compte</p>
<p><img class=img-fluid alt=circleci-create-user.png src=/fr/posts/how-to-evolve-application-cicd/circleci-create-user.png loading=lazy width=535 height=521>
</p>
</li>
<li>
<p>Configurer notre code</p>
<p><img class=img-fluid alt=img.png src=/fr/posts/how-to-evolve-application-cicd/img.png loading=lazy width=662 height=790>
</p>
</li>
<li>
<p>Configurer</p>
</li>
</ul>
<p>Il y a trois possibilités pour lier votre projet avec votre futur CI :</p>
<p><img class=img-fluid alt=circleci-create-settings.png src=/fr/posts/how-to-evolve-application-cicd/circleci-create-settings.png loading=lazy width=484 height=405>
</p>
<h4 id=création-dun-job>Création d&rsquo;un job<a class="anchor ms-1" href=#création-dun-job><i class="fas fa-link"></i></a></h4>
<p>CircleCI définit des &ldquo;jobs&rdquo; qui sont des tâches exécutables ; chaque job peut être divisé en étapes.
Dans la première version de notre CI (cf. code ci-dessous) nous voulons :</p>
<ul>
<li>Construire le fichier jar.</li>
<li>Exécuter les tests unitaires.</li>
<li>Exécuter les tests d&rsquo;intégration.</li>
<li>Exécuter les tests système.</li>
</ul>
<p>Voici le fichier <code>.circleci/config.yml</code> :</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=ln>  1</span># Java Gradle CircleCI 2.0 configuration file
<span class=ln>  2</span># See: https://circleci.com/docs/2.0/language-java/
<span class=ln>  3</span>version: 2.1
<span class=ln>  4</span>
<span class=ln>  5</span>
<span class=ln>  6</span># Define a job to be invoked later in a workflow.
<span class=ln>  7</span># See: https://circleci.com/docs/2.0/configuration-reference/#jobs
<span class=ln>  8</span>jobs:
<span class=ln>  9</span>  assemble:
<span class=ln> 10</span>    # Specify the execution environment. You can specify an image from Dockerhub or use one of our Convenience Images from CircleCI&#39;s Developer Hub.
<span class=ln> 11</span>    # See: https://circleci.com/docs/2.0/configuration-reference/#docker-machine-macos-windows-executor
<span class=ln> 12</span>    docker:
<span class=ln> 13</span>      # specify the version you desire here
<span class=ln> 14</span>      - image: cimg/openjdk:17.0.5
<span class=ln> 15</span>
<span class=ln> 16</span>      # Specify service dependencies here if necessary
<span class=ln> 17</span>      # CircleCI maintains a library of pre-built images
<span class=ln> 18</span>      # documented at https://circleci.com/docs/2.0/circleci-images/
<span class=ln> 19</span>      # - image: circleci/postgres:9.4
<span class=ln> 20</span>
<span class=ln> 21</span>    working_directory: ~/happraisal
<span class=ln> 22</span>
<span class=ln> 23</span>    environment:
<span class=ln> 24</span>      # Customize the JVM maximum heap limit
<span class=ln> 25</span>      JVM_OPTS: -Xmx3200m
<span class=ln> 26</span>      TERM: dumb
<span class=ln> 27</span>    # Add steps to the job
<span class=ln> 28</span>    # See: https://circleci.com/docs/2.0/configuration-reference/#steps
<span class=ln> 29</span>    steps:
<span class=ln> 30</span>      - checkout
<span class=ln> 31</span>      - attach_workspace:
<span class=ln> 32</span>          at: ~/happraisal
<span class=ln> 33</span>
<span class=ln> 34</span>      # Download and cache dependencies
<span class=ln> 35</span>      - restore_cache:
<span class=ln> 36</span>          keys:
<span class=ln> 37</span>            - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 38</span>            # fallback to using the latest cache if no exact match is found
<span class=ln> 39</span>            - v1-dependencies-
<span class=ln> 40</span>
<span class=ln> 41</span>      - run: ./gradlew assemble
<span class=ln> 42</span>
<span class=ln> 43</span>      - save_cache:
<span class=ln> 44</span>          paths:
<span class=ln> 45</span>            - ~/.gradle
<span class=ln> 46</span>          key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 47</span>      - persist_to_workspace:
<span class=ln> 48</span>          root: ~/happraisal
<span class=ln> 49</span>          paths:
<span class=ln> 50</span>            - ./build
<span class=ln> 51</span>      - store_artifacts:
<span class=ln> 52</span>          path: ~/happraisal/build/libs
<span class=ln> 53</span>
<span class=ln> 54</span>  unit-tests:
<span class=ln> 55</span>    docker:
<span class=ln> 56</span>      - image: cimg/openjdk:17.0.5
<span class=ln> 57</span>
<span class=ln> 58</span>    working_directory: ~/happraisal
<span class=ln> 59</span>    steps:
<span class=ln> 60</span>        - checkout
<span class=ln> 61</span>        - restore_cache:
<span class=ln> 62</span>            keys:
<span class=ln> 63</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 64</span>              # fallback to using the latest cache if no exact match is found
<span class=ln> 65</span>              - v1-dependencies-
<span class=ln> 66</span>        - run: ./gradlew test
<span class=ln> 67</span>        - save_cache:
<span class=ln> 68</span>            paths:
<span class=ln> 69</span>              - ~/.gradle
<span class=ln> 70</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 71</span>        - store_test_results:
<span class=ln> 72</span>            path:  ~/happraisal/build/test-results
<span class=ln> 73</span>
<span class=ln> 74</span>
<span class=ln> 75</span>
<span class=ln> 76</span>  integration-tests:
<span class=ln> 77</span>    docker:
<span class=ln> 78</span>      - image: cimg/openjdk:17.0.5
<span class=ln> 79</span>
<span class=ln> 80</span>    working_directory: ~/happraisal
<span class=ln> 81</span>    steps:
<span class=ln> 82</span>        - checkout
<span class=ln> 83</span>        - restore_cache:
<span class=ln> 84</span>            keys:
<span class=ln> 85</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 86</span>              # fallback to using the latest cache if no exact match is found
<span class=ln> 87</span>              - v1-dependencies-
<span class=ln> 88</span>        - run: ./gradlew integrationTest
<span class=ln> 89</span>        - save_cache:
<span class=ln> 90</span>            paths:
<span class=ln> 91</span>              - ~/.gradle
<span class=ln> 92</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 93</span>
<span class=ln> 94</span>
<span class=ln> 95</span>  system-tests:
<span class=ln> 96</span>    docker:
<span class=ln> 97</span>      - image: cimg/openjdk:17.0.5
<span class=ln> 98</span>
<span class=ln> 99</span>    working_directory: ~/happraisal
<span class=ln>100</span>    steps:
<span class=ln>101</span>        - checkout
<span class=ln>102</span>        - restore_cache:
<span class=ln>103</span>            keys:
<span class=ln>104</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln>105</span>              # fallback to using the latest cache if no exact match is found
<span class=ln>106</span>              - v1-dependencies-
<span class=ln>107</span>        - run: ./gradlew systemTest
<span class=ln>108</span>        - save_cache:
<span class=ln>109</span>            paths:
<span class=ln>110</span>              - ~/.gradle
<span class=ln>111</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln>112</span>
<span class=ln>113</span>workflows:
<span class=ln>114</span>  version: 2.1
<span class=ln>115</span>  microservice:
<span class=ln>116</span>    jobs:
<span class=ln>117</span>      - assemble
<span class=ln>118</span>      - unit-tests:
<span class=ln>119</span>          requires:
<span class=ln>120</span>            - assemble
<span class=ln>121</span>      - integration-tests:
<span class=ln>122</span>          requires:
<span class=ln>123</span>            - assemble
<span class=ln>124</span>      - system-tests:
<span class=ln>125</span>          requires:
<span class=ln>126</span>            - assemble
<span class=ln>127</span>
</code></pre></div><h3 id=mise-en-oeuvre-avec-les-actions-github>Mise en oeuvre avec les actions GitHub<a class="anchor ms-1" href=#mise-en-oeuvre-avec-les-actions-github><i class="fas fa-link"></i></a></h3>
<h4 id=terminologie>Terminologie<a class="anchor ms-1" href=#terminologie><i class="fas fa-link"></i></a></h4>
<p>Un flux de travail : dans la documentation officielle, un workflow est défini comme &ldquo;un processus automatisé configurable qui exécutera un ou plusieurs travaux&rdquo;.
Il est configuré via un fichier yaml cf. <a href=https://docs.github.com/fr/actions/using-workflows/about-workflows target=_blank rel="noopener noreferrer">https://docs.github.com/fr/actions/using-workflows/about-workflows</a>
</p>
<p>Action : &ldquo;Les actions sont des tâches individuelles que vous pouvez combiner pour créer des tâches et personnaliser votre flux de travail.&rdquo; cf. <a href=https://docs.github.com/fr/actions/creating-actions/about-custom-actions target=_blank rel="noopener noreferrer">https://docs.github.com/fr/actions/creating-actions/about-custom-actions</a>
</p>
<h4 id=première-connexion-1>Première connexion<a class="anchor ms-1" href=#première-connexion-1><i class="fas fa-link"></i></a></h4>
<p>GitHub Actions est l&rsquo;outil de CI de GitHUb.
Ce CI est accessible depuis le bouton Action dans une barre d&rsquo;outils
<img class=img-fluid alt=github_action_menu.png src=/fr/posts/how-to-evolve-application-cicd/github_action_menu.png loading=lazy width=1606 height=91>
</p>
<p>Lors du premier accès, GithUb Actions affiche une proposition de workflow en fonction de votre projet.
Dans notre cas, nous avons sélectionné le workflow Java avec gradle.</p>
<p><img class=img-fluid alt=github_action_gradle.png src=/fr/posts/how-to-evolve-application-cicd/github_action_gradle.png loading=lazy width=782 height=434>
</p>
<p>Une fois que nous avons sélectionné notre workflow, nous sommes redirigés vers l&rsquo;éditeur nous proposant un fichier par défaut.
Il est possible de le modifier et de le sauvegarder sur une branche spécifique ; afin de tester facilement le CICD sans avoir à le pousser sur develop.
Il est possible de définir le nom de la branche de travail dans la partie push.</p>
<p><img class=img-fluid alt=github_action_gradle_file.png src=/fr/posts/how-to-evolve-application-cicd/github_action_gradle_file.png loading=lazy width=1189 height=446>
</p>
<h3 id=création-de-jobs>Création de jobs<a class="anchor ms-1" href=#création-de-jobs><i class="fas fa-link"></i></a></h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=ln>1</span><span class=nt>on </span><span class=p>:</span><span class=w>
</span><span class=ln>2</span><span class=w>  </span><span class=nt>push </span><span class=p>:</span><span class=w>
</span><span class=ln>3</span><span class=w>    </span><span class=nt>branches </span><span class=p>:</span><span class=w>
</span><span class=ln>4</span><span class=w>    </span>- <span class=l>develop</span><span class=w>
</span><span class=ln>5</span><span class=w>    </span>- <span class=l>ci_* </span><span class=w>
</span></code></pre></div><p>Pour mettre en oeuvre les 3 étapes définies ci-dessus, nous devons créer les jobs :</p>
<ul>
<li>assemble : pour compiler le code et créer le jar.</li>
<li>spotless : pour vérifier le format du nouveau code.</li>
<li>unit-tests : pour exécuter les tests unitaires.</li>
<li>integration-tests : pour exécuter les tests d&rsquo;intégration.</li>
<li>system-tests : pour exécuter les tests système.</li>
</ul>
<p>Le code ci-dessous montre un exemple de création d&rsquo;un job</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=ln> 1</span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span><span class=ln> 2</span><span class=w>  </span><span class=nt>assemble</span><span class=p>:</span><span class=w>
</span><span class=ln> 3</span><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=ln> 4</span><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=ln> 5</span><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span><span class=ln> 6</span><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-java@v3</span><span class=w>
</span><span class=ln> 7</span><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=ln> 8</span><span class=w>        </span><span class=nt>java-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;17&#39;</span><span class=w>
</span><span class=ln> 9</span><span class=w>        </span><span class=nt>distribution</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;temurin&#39;</span><span class=w>
</span><span class=ln>10</span><span class=w>        </span><span class=nt>cache</span><span class=p>:</span><span class=w> </span><span class=l>gradle</span><span class=w>
</span><span class=ln>11</span><span class=w>    </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./gradlew assemble --no-daemon</span><span class=w>
</span><span class=ln>12</span><span class=w>
</span></code></pre></div><p>Dans le code ci-dessus :</p>
<ul>
<li>Nous créons le job assemble qui est basé sur ubuntu-latest</li>
<li>Nous utilisons deux actions pour vérifier le code et configurer le compilateur Java.</li>
<li>Nous exécutons la tâche gradle assemble.</li>
</ul>
<h2 id=résumé>Résumé<a class="anchor ms-1" href=#résumé><i class="fas fa-link"></i></a></h2>
<p>Le premier objectif de cet article était de tester trois moteurs CICD (GitLab, CircleCi et GitHub Actions), mettant en oeuvre des pipelines similaires.
En essayant d&rsquo;implémenter le CICD sur ces moteurs, nous avons rapidement rencontré quelques limitations pour les deux premiers CICD :</p>
<ul>
<li>Pousser le rapport de la CI Gitlab vers GitHub n&rsquo;est pas possible.</li>
<li>Sur CircleCi, l&rsquo;espace maximum disponible pour les artefacts et leur temps de rétention n&rsquo;étaient pas compatibles avec nos objectifs.
Dans ce cas, seule l&rsquo;action GitHub est complètement utile.</li>
</ul>
<p>En conclusion, je pense que pour mettre en place un CICD libre, il est préférable d&rsquo;utiliser un CI intégré à son gestionnaire de version comme GItHub Actions pour GitHub ou GitLab CICD pour GitLab.</p>
<p>Si vous avez des remarques sur le fond ou la forme, vous pouvez laisser un commentaire&mldr;c&rsquo;est en échangeant que l&rsquo;on progresse.</p>
<p>Écrit par : Emmanuel Quinton
Revue par : Daniele Cremonini</p></div><hr><div class=post-copyright id=post-copyright>
<a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.en>
<span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
CC BY-NC-ND 4.0
</a>
</div>
<hr><div class="post-navs d-flex mb-3 justify-content-evenly">
<div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
<a href=/fr/posts/c-est-quoi-une-api/>Introduction Aux APIs
</a>
</div></div></div>
</article><section class="related-posts row card component">
<div class=card-header>
<h2 class=card-title>Articles en Relations</h2>
</div>
<div class=card-body>
<ul class=post-list><li>
<a href=/fr/posts/comment-faire-evoluer-application-presentation/>Comment Faire Évoluer Une API Pour La Rendre Plus Robuste Et Maintenable - Presentation
</a>
<span class="float-end post-date">15-01-2023
</span>
</li><li>
<a href=/fr/posts/comment-faire-evoluer-une-application-pour-la-rendre-plus-robuste-et-maintenable-mise-en-place-de-tests/>Comment Faire Évoluer Une Application Pour La Rendre Plus Robuste Et Maintenable - Mise en Place De Tests
</a>
<span class="float-end post-date">15-01-2023
</span>
</li><li>
<a href=/fr/posts/qu-est-ce-que-la-mise-en-page-du-code-et-pourquoi-est-ce-important/>Qu'est-Ce Que La Mise en Page Du Code Et Pourquoi Est-Ce Important
</a>
<span class="float-end post-date">16-01-2023
</span>
</li><li>
<a href=/fr/about/>About
</a>
<span class="float-end post-date">13-01-2022
</span>
</li><li>
<a href=/fr/contact/>
</a>
<span class="float-end post-date">01-01-0001
</span>
</li></ul>
</div>
</section><div class="card component row post-comments" id=post-comments>
<div class=card-header>
<h2 class=card-title>Commentaires</h2>
</div>
<div class=card-body></div>
</div></div>
</div><aside class="col-lg-4 sidebar d-flex">
<div class=container>
<section class="card row text-center profile component">
<div class=card-body>
<div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Talk To The Duck" src=/images/duck_120x120_square.png loading=lazy width=120 height=120>
</div>
<div class="col-12 profile-meta"><div class=profile-name>Talk To The Duck</div><div class=profile-bio>Explain to the Duck, you will understand.</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Paris, France</div><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=/fr/about/>About</a></div><div class=profile-contact><i class="fas fa-fw fa-question-circle"></i><a href=/fr/contact/></a></div></div>
</div>
</section>
<section class="recent-posts row card component">
<div class=card-header>
<h2 class=card-title>Articles Récents</h2>
</div>
<div class=card-body>
<ul class=post-list><li>
<a href=/fr/posts/how-to-evolve-application-cicd/>Comment Faire Évoluer Une Application Pour La Rendre Plus Robuste Et Maintenable - Mise en Place Du CICD
</a>
</li><li>
<a href=/fr/posts/c-est-quoi-une-api/>Introduction Aux APIs
</a>
</li><li>
<a href=/fr/posts/qu-est-ce-que-la-mise-en-page-du-code-et-pourquoi-est-ce-important/>Qu'est-Ce Que La Mise en Page Du Code Et Pourquoi Est-Ce Important
</a>
</li><li>
<a href=/fr/posts/comment-faire-evoluer-application-presentation/>Comment Faire Évoluer Une API Pour La Rendre Plus Robuste Et Maintenable - Presentation
</a>
</li><li>
<a href=/fr/posts/comment-faire-evoluer-une-application-pour-la-rendre-plus-robuste-et-maintenable-mise-en-place-de-tests/>Comment Faire Évoluer Une Application Pour La Rendre Plus Robuste Et Maintenable - Mise en Place De Tests
</a>
</li></ul>
</div>
</section><section class="taxonomies row card component">
<div class=card-header>
<h2 class=card-title>
<a href=/fr/categories>Catégories</a>
</h2>
</div>
<div class=card-body>
<div class=py-2><a href=/fr/categories/qualit%C3%A9/ class="badge rounded post-taxonomy" title=qualité>
qualité
</a><a href=/fr/categories/test/ class="badge rounded post-taxonomy" title=test>
test
</a><a href=/fr/categories/api/ class="badge rounded post-taxonomy" title=API>
API
</a><a href=/fr/categories/cicd/ class="badge rounded post-taxonomy" title=CICD>
CICD
</a></div>
</div>
</section><section class="taxonomies row card component">
<div class=card-header>
<h2 class=card-title>
<a href=/fr/series>Séries</a>
</h2>
</div>
<div class=card-body>
<div class=py-2><a href=/fr/series/comment-faire-%C3%A9voluer-une-application-pour-la-rendre-plus-robuste-et-maintenable/ class="badge rounded post-taxonomy" title=" Comment faire évoluer une application pour la rendre plus robuste et maintenable">
Comment faire évoluer une application pour la rendre plus robuste et maintenable
</a><a href=/fr/series/outils-pour-java/ class="badge rounded post-taxonomy" title="Outils pour Java">
Outils pour Java
</a><a href=/fr/series/travailler-avec-les-apis/ class="badge rounded post-taxonomy" title="Travailler avec les APIs">
Travailler avec les APIs
</a></div>
</div>
</section>
</div>
</aside>
</div>
</main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav justify-content-center mb-2"></nav>
<div class="copyright mb-2">
<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png></a><br>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
Copyright © 2021-2024 Talk To The Duck. All Rights Reserved.
</div>
</footer>
<script src=/js/main.min.d1ef5819d5055b58eaa52e77fc1c87e27b1a006bc5169ce78255477ef0bb2281.js integrity="sha256-0e9YGdUFW1jqpS53/ByH4nsaAGvFFpznglVHfvC7IoE=" crossorigin=anonymous defer></script><script src=/js/icons.min.a35670f2f90c398e5ee5c8e509b428fae75aa2746854cee10b60794633076859.js integrity="sha256-o1Zw8vkMOY5e5cjlCbQo+udaonRoVM7hC2B5RjMHaFk=" crossorigin=anonymous defer></script>
<script>'serviceWorker'in navigator&&window.addEventListener('load',()=>{navigator.serviceWorker.register('/service-worker.js').then(function(a){console.log('Successfully registered service worker',a)}).catch(function(a){console.warn('Error whilst registering service worker',a)})})</script><script src=/js/viewer.min.4dba52a0a790f909408b7385316651299158381686401d50ff1f04dda6476473.js integrity="sha256-TbpSoKeQ+QlAi3OFMWZRKZFYOBaGQB1Q/x8E3aZHZHM=" crossorigin=anonymous defer></script>
</body>
</html>