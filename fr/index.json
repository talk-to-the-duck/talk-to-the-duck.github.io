[{"categories":[""],"content":"Un outil de mise en forme automatique peut-il augmenter la productivité ?\nLa réponse est oui.\nLe livre \u0026ldquo;The Pragmatic Programmer\u0026rdquo; parle de l\u0026rsquo;entropie du code. L\u0026rsquo;entropie est une grandeur physique liée au désordre moléculaire. C\u0026rsquo;est peut-être la seule grandeur physique que l\u0026rsquo;on puisse trouver dans un logiciel. Plus le désordre est important, plus l\u0026rsquo;entropie est élevée. Plus votre logiciel est entropique, plus - jour après jour - il sera difficile de travailler avec.\nPour expliquer pourquoi, je vais vous donner un exemple.\nLors de l\u0026rsquo;écriture d\u0026rsquo;un if-then-else dans un langage comme Java, où est-il préférable de mettre des parenthèses ?\nVous pouvez dire comment a), b) ou c) ou vous pouvez inventer une autre combinaison intermédiaire de votre goût.\na)\n1if (condition) { 2 // your \u0026#34;then\u0026#34; code here 3} else { 4 // your \u0026#34;else\u0026#34; code here 5} b)\n1if (condition) 2{ 3 // your \u0026#34;then\u0026#34; code here 4} 5else 6{ 7 // your \u0026#34;else\u0026#34; code here 8} c)\n1if (condition) { 2 // your \u0026#34;then\u0026#34; code here 3} 4else { 5 // your \u0026#34;else\u0026#34; code here 6} Les façons de mettre en page le code sont nombreuses : où mettre l\u0026rsquo;ouverture de l\u0026rsquo;accolade, si utiliser la tabulation ou l\u0026rsquo;espace pour mettre en retrait, si pour ajouter un espace après l\u0026rsquo;ouverture d\u0026rsquo;un crochet, où mettre les commentaires. Même l\u0026rsquo;écriture des conditions logiques peut se faire de plusieurs façons :\n1(a==b) ou\n1(a == b) ou\n1( a == b ) J\u0026rsquo;ai été témoin de diverses discussions animées sur le style qui est \u0026ldquo;meilleur\u0026rdquo; mais au-delà de cela qui peut en sortir, ce qui compte vraiment, c\u0026rsquo;est la cohérence. Pourquoi? Parce que, même si une personne peut ne pas aimer un certain style, au bout d\u0026rsquo;un moment elle finit par s\u0026rsquo;y habituer et lorsqu\u0026rsquo;elle s\u0026rsquo;y habitue, la lecture du code devient automatique. Le code devient plus intuitif. Si la mise en forme du code est incohérente, la lecture du code devient plus ardue. La fatigue augmente la probabilité de faire des erreurs. Il faudra du temps pour trouver ces erreurs et plus de temps pour les corriger. En fin de compte, ne pas mettre en forme votre code de manière cohérente entraîne une baisse de productivité.\nGarder votre code mis en forme de manière cohérente peut être un défi même pour un seul développeur, mais dans une équipe, vous pouvez être assuré que la cohérence ne durera pas. Les développeurs travaillent presque toujours en équipe. Pour une équipe, avoir une règle partagée signifie augmenter la productivité globale. Construisez un consensus autour d\u0026rsquo;un style de mise en forme de code et si vous ne pouvez pas, imposez-le. Même si vous rencontrez une certaine résistance au début, vos collègues s\u0026rsquo;y habitueront, se fatigueront moins et seront plus productifs.\nLa cohérence et l\u0026rsquo;ordre qui en résulte sont encore plus importants que le style de la mise en forme elle-même.\nSi on a un outil qui non seulement vérifie que les règles sont respectées mais qui aussi met en forme le code automatiquement, on obtient un deuxième gros avantage qui est de gagner du temps et du stress pour exécuter cette opération.\nLa définition d\u0026rsquo;un style de mise en forme pour un langage ayant une syntaxe moyennement complexe comme celle de Java peut nécessiter des dizaines de règles et pour ce qui a été dit plus haut, il est bon que ces règles soient cohérentes dans les différents cas qui peuvent se présenter.\nQue se passe-t-il si vous décidez d\u0026rsquo;appliquer des règles de mise en forme à un projet composé de plusieurs fichiers ? Faut-il mettre en forme tous les fichiers en une seule fois ou vaut-il mieux procéder progressivement en ne mettant traiter que quelques fichiers à la fois ?\nSi un projet a un historique de quelques jours, mettre en forme tous les fichiers en une seule fois n\u0026rsquo;a pas un gros impact sur la traçabilité des changements dans le log du système de gestion source (git par exemple) mais si les fichiers sont plusieurs centaines avec plus développeurs qui travaillent avec et peut-être en mode asynchrone (comme cela se produit généralement sur un projet open source) mettre en forme petit à petit est vraiment une nécessité.\nEnfin, comme il vaut mieux ne pas avoir à s\u0026rsquo;inquiéter à chaque fois que l\u0026rsquo;on tape sur le code pour le mettre en page, il vaut mieux avoir un déclenchement automatique de cette opération.\nEnsuite, vous devez créer l\u0026rsquo;outil logiciel qui lit le code, applique les règles et l\u0026rsquo;exécute sur chaque version.\nVoulez-vous savoir comment nous avons fait toutes ces choses dans notre API Happraisal ?\nNous avons choisi une solution toute faite. Dans le monde open source, il y en a. Nous avons choisi Spotless car en plus de nous permettre d\u0026rsquo;analyser le code et de le mettre en forme, il est également multi-language. Spotless ne se limite pas à Java mais gère également C, JavaScript, TypeScript, yaml, JSON, SQL et autres.\nLe référentiel Spotless est sur GitHub : https://github.com/diffplug/spotless Spotless peut être intégré dans les versions basées sur Maven et Gradle via des plugins.\nPour l’utiliser dans Happraisal nous avons importé un plugin dans Gradle et plus bas nous avons inclus un fichier de configuration via la commande apply :\nbuild.gradle\n1plugins { 2 // other plugins 3 id \u0026#34;com.diffplug.spotless\u0026#34; version \u0026#34;6.2.1\u0026#34; 4} 5 6// Include the configuration for Spotless 7apply from: \u0026#34;gradle / spotless.gradle\u0026#34; Notre gradle/spotless.gradle se compose de trois parties. Le premier est ratchetFrom qui, s\u0026rsquo;il est spécifié, permet d\u0026rsquo;appliquer la mise en forme de manière incrémentielle uniquement aux fichiers modifiés par rapport à la branche spécifiée qui dans le cas de Happraisal à origin/develop car c\u0026rsquo;est la branche vers laquelle convergent les demandes de fusion. Fondamentalement, chaque fois que nous ajoutons du code à Origin/développons Spotless, cela nous oblige à ne pas aggraver la situation. Le paramètre spécifié dans ratchetFrom peut être quelque chose de plus compliqué, pour en savoir plus vous pouvez consulter ce fichier : https://javadoc.io/static/org.eclipse.jgit/org.eclipse.jgit/5.6.1.202002131546-r/org/eclipse/jgit/lib/Repository.html#resolve-java.lang.String- Note linguistique : Le mot ratchet en anglais signifie que la règle peut être plus stricte (ou rester inchangée) mais ne peut pas devenir moins stricte.\nLa deuxième section appelée \u0026ldquo;misc\u0026rdquo; vous permet de spécifier des règles de mise en forme pour les fichiers qui peuvent être identifiés via l\u0026rsquo;extension gradle ou md.\nLa troisième section est dédiée à Java. Dans la section Java, il y a un appel à googleJavaFormat qui est une application dédiée exclusivement à la mise en forme du code Java.\nGoogle Java Format se trouve sur GitHub : https://github.com/google/google-java-format et dans les balises vous trouverez toutes les versions publiées (par exemple 1.13).\nSi vous n\u0026rsquo;aimez pas le style de mise en forme imposé par Google et que vous souhaitez vous orienter sur un style configurable alors vous devez passer à un metteur un forme Eclipse. Je vous renvoie au site Spotless pour plus d\u0026rsquo;informations.\nNotez que Spotless vous permet également de gérer les en-têtes des licences logicielles via la commande licenseHeader.\n1spotless { 2// optional: limit format enforcement to just the files changed by this feature branch 3ratchet From \u0026#39;origin/develop\u0026#39; 4 5 format \u0026#39;misc\u0026#39;, { 6 // define the files to apply `misc` to 7 target \u0026#39;* .gradle\u0026#39;, \u0026#39;* .md \u0026#39;,\u0026#39; .gitignore \u0026#39; 8 9 // define the steps to apply to those files 10 trimTrailingWhitespace () 11 indentWithSpaces () // tab or spaces. indentWithSpaces takes an integer argument, the default value is 4 12 endWithNewline () 13 } 14 15 java { 16 // don\u0026#39;t need to set target, it is inferred from Java 17 18 // apply a specific flavor of google-java-format 19 googleJavaFormat (\u0026#39;1.13. 0 \u0026#39;). ReflowLongStrings () 20 // make sure every file has the following copyright header. 21 // optionally, Spotless can set copyright years by digging 22 // through git history. 23 licenseHeader \u0026#39;/ * (C) $ YEAR * /\u0026#39; 24 } 25} Résumé L\u0026rsquo;application de règles strictes à la mise en forme du code réduit l\u0026rsquo;effort et le stress des développeurs et augmente leur productivité. Il serait préférable de partager un style de mise en forme au niveau de l\u0026rsquo;équipe, mais si vous n\u0026rsquo;y arrivez pas par consensus, cela vaut la peine d’en imposer un, car après un certain temps, les gens s\u0026rsquo;y habituent. Une fois que vous avez décidé d\u0026rsquo;un style, il est bon d\u0026rsquo;avoir un outil automatisé pour vérifier que la mise en forme est cohérente. Disposer d\u0026rsquo;un outil pour appliquer automatiquement la mise en forme permet de gagner du temps et d\u0026rsquo;éliminer une tâche mécanique. Spotless est un outil open source qui peut être intégré via des plugins avec Maven et Gradle. Spotless vous permet de mettre en page votre code progressivement afin de ne pas avoir à faire un méga commit au moment de son introduction.\nSi vous lisez cette phrase c’est que vous avez lu cet article en entier et je vous en remercie car c’est mon premier article, si vous avez des remarques sur le contenu, la forme vous pouvez laisser un commentaire…\nC’est en échangeant qu’on progresse.\nAuteur : Daniele Cremonini Relecteur : Emmanuel Quinton\n","date":"12-10-2022","img":"","permalink":"/fr/posts/qu-est-ce-que-la-mise-en-page-du-code-et-pourquoi-est-ce-important/","series":["Outils pour Java"],"tags":[""],"title":"Qu'est-Ce Que La Mise en Page Du Code Et Pourquoi Est-Ce Important"},{"categories":[""],"content":"Vous êtes-vous déjà retrouvé coincé en écrivant un morceau de code particulièrement compliqué et avez compris ce qui n\u0026rsquo;allait pas au moment exact où vous avez demandé de l\u0026rsquo;aide à un collègue ?\nExpliquez votre code à un canard (si c’est en caoutchouc , il restera toujours à portée de main sur votre bureau) et vos idées se clarifieront vite fait.\nIl peut sembler bizarre mais si au lieu de lire en boucle votre code, vous le racontez à quelqu\u0026rsquo;un, votre cerveau souvent dévoile le mystère. L\u0026rsquo;idée d’expliquer le code à un canard en caoutchouc a été popularisée par le livre de David Thomas et Andrew Hunt \u0026ldquo;The Pragmatic Programmer\u0026rdquo;. La méthode fonctionne. Cela explique le logo.\nMais qu’est-ce qui nous a poussés à créer un site qui vous incite à parler à un canard?\nNous avons fait plusieurs constats :\n Il nous arrive souvent de tomber sur du code non mis à jour quand on allait voir le code associé à des articles. Dans de nombreux cas, les projets associés aux articles sont dépourvus de tests. La qualité du logiciel est un sujet peu connu ou négligé en faveur de différents facteurs qui presque jamais sont justifiable en termes rationnels.  L\u0026rsquo;idée première de ce site est donc de présenter des articles et des méthodologies auxquels seront associés des projets ayant la même qualité que celle qui nous est demandée dans notre travail et d\u0026rsquo;assurer un suivi des mises à jours de ces projets.\nPar extensions, l\u0026rsquo;idée est également de présenter des articles autour de notre métier de développeur; peut être de présenter des livres qui nous auront interpellés.\nDans tous les cas les sujets ne seront qu\u0026rsquo;un reflet de ce que nous pensons, notre savoir faire mais en aucun cas se ne sont des points de vus fermés car pour progresser il faut savoir entendre l\u0026rsquo;avis des autres et accepter qu\u0026rsquo;il y a différentes façons de faire.\n","date":"13-01-2022","img":"","permalink":"/fr/about/","series":[""],"tags":[""],"title":"About"},{"categories":null,"content":"render = never\n+++ title = \u0026ldquo;Contactez nous\u0026rdquo; layout = \u0026ldquo;contact\u0026rdquo; [menu.footer] parent = \u0026ldquo;support\u0026rdquo; weight = 6 pre = \u0026lsquo;\u0026rsquo; +++\n","date":"01-01-0001","img":"","permalink":"/fr/contact/","series":null,"tags":null,"title":""},{"categories":null,"content":"","date":"01-01-0001","img":"","permalink":"/fr/offline/","series":null,"tags":null,"title":"Hors Ligne"}]