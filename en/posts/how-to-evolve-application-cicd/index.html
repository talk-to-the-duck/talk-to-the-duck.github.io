<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>How to evolve an application to make it more robust and maintainable - Setting up the CICD - Talk To The Duck</title><link rel=apple-touch-icon href=/images/icons/icon-180x180.png sizes=180x180>
<link rel=icon href=/images/icons/icon-32x32.png sizes=32x32 type=image/png>
<link rel=icon href=/images/icons/icon-16x16.png sizes=16x16 type=image/png>
<link rel=icon href=/images/icons/favicon.ico>
<link rel=manifest href=/en/manifest.json>
<meta name=keywords content>
<meta name=description content><meta itemprop=name content="How to evolve an application to make it more robust and maintainable - Setting up the CICD">
<meta itemprop=description content><meta itemprop=datePublished content="2023-01-15T00:00:00+00:00">
<meta itemprop=dateModified content="2023-06-05T21:31:56+02:00">
<meta itemprop=wordCount content="1238">
<meta itemprop=keywords content=","><meta property="og:title" content="How to evolve an application to make it more robust and maintainable - Setting up the CICD">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="/en/posts/how-to-evolve-application-cicd/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2023-01-15T00:00:00+00:00">
<meta property="article:modified_time" content="2023-06-05T21:31:56+02:00">
<meta property="og:see_also" content="/en/posts/how-to-evolve-application-add-quality/"><meta property="og:see_also" content="/en/posts/how-to-evolve-application-presentation/"><meta property="og:see_also" content="/en/posts/how-to-evolve-application-tests/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="How to evolve an application to make it more robust and maintainable - Setting up the CICD">
<meta name=twitter:description content>
<meta name=robots content="index, follow"><link rel=stylesheet href=/css/main.min.bdac26feededc335ec4311c668376189bbfe162d3dc6063df0d592d8d855725c.css integrity="sha256-vawm/u3twzXsQxHGaDdhibv+Fi09xgY98NWS2NhVclw=" crossorigin=anonymous><link rel=stylesheet href=/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css integrity="sha256-PSKHlLztu/oEEr64+8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin=anonymous></head>
<body><script>const items=['mode','palette'];items.forEach(function(a){const b=localStorage.getItem('hbs-'+a);b&&document.body.parentElement.setAttribute('data-'+a,b)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
<div class=container>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand me-3" href=/en/><img class=logo alt=Logo src=/images/ttd-logo.webp loading=lazy width=136 height=136>
Talk To The Duck
</a>
<div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare>
<div class=offcanvas-header>
<h3 class=offcanvas-title>Share</h3>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class=offcanvas-body>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=How%20to%20evolve%20an%20application%20to%20make%20it%20more%20robust%20and%20maintainable%20-%20Setting%20up%20the%20CICD&url=%2fen%2fposts%2fhow-to-evolve-application-cicd%2f">
<i class="fab fa-fw fa-twitter"></i> Twitter
</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=%2fen%2fposts%2fhow-to-evolve-application-cicd%2f">
<i class="fab fa-fw fa-facebook-f"></i> Facebook
</a>
</div>
</div>
<button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i>
</button>
<div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings>
<div class=offcanvas-header>
<h3 class=offcanvas-title>Settings</h3>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class="offcanvas-body d-flex flex-column"><section class=setting>
<form class=row>
<div class=col-auto>
<label for=fontSize class=form-label><i class="fas fa-fw fa-language"></i> Language</label>
</div>
<div class="col-auto ms-auto">
<div class=dropdown>
<a class="btn btn-sm btn-outline-primary dropdown-toggle" href=# id=languageDropdown role=button data-bs-toggle=dropdown aria-expanded=false>
English
</a>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby=languageDropdown><li><a class=dropdown-item href=/fr/>Français</a></li><li><a class=dropdown-item href=/it/>Italiano</a></li></ul>
</div>
</div>
</form>
</section>
<section class=setting>
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-adjust"></i> Mode</label>
</div>
<div class="col-auto ms-auto">
<div class="form-check form-switch">
<input class=form-check-input type=checkbox id=modeSwitcher>
</div>
</div>
</form>
</section>
<section class=setting>
<form class="font-size-switcher-form row">
<div class=col-auto>
<label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Font Size</label>
</div>
<div class="col-auto ms-auto">
<input type=range class=form-range min=-2 max=2 id=fontSize>
</div>
</form>
</section>
<section class="setting palettes">
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-palette"></i> Palette</label>
</div>
<div class="col-auto ms-auto">
<a id=btnPalette class="btn btn-sm btn-outline-primary" role=button aria-label=palettePicker>
<i class="fas fa-eye-dropper"></i>
</a>
</div>
</form>
<div class="mt-2 d-flex visually-hidden" id=palettePicker><button type=button id=palette-blue aria-label=Blue class="btn btn-sm palette" data-palette=blue>
</button><button type=button id=palette-blue-gray aria-label="Blue Gray" class="btn btn-sm palette" data-palette=blue-gray>
</button><button type=button id=palette-brown aria-label=Brown class="btn btn-sm palette" data-palette=brown>
</button><button type=button id=palette-cyan aria-label=Cyan class="btn btn-sm palette" data-palette=cyan>
</button><button type=button id=palette-green aria-label=Green class="btn btn-sm palette" data-palette=green>
</button><button type=button id=palette-indigo aria-label=Indigo class="btn btn-sm palette" data-palette=indigo>
</button><button type=button id=palette-orange aria-label=Orange class="btn btn-sm palette" data-palette=orange>
</button><button type=button id=palette-pink aria-label=Pink class="btn btn-sm palette" data-palette=pink>
</button><button type=button id=palette-purple aria-label=Purple class="btn btn-sm palette" data-palette=purple>
</button><button type=button id=palette-red aria-label=Red class="btn btn-sm palette" data-palette=red>
</button><button type=button id=palette-teal aria-label=Teal class="btn btn-sm palette" data-palette=teal>
</button><button type=button id=palette-yellow aria-label=Yellow class="btn btn-sm palette" data-palette=yellow>
</button></div>
</section>
<section class="setting actions d-flex justify-content-around mt-auto overflow-auto">
<a role=button class="action action-reload-page">
<span class=action-icon><i class="fas fa-2x fa-redo-alt"></i></span> Reload
</a>
<a role=button class="action action-copy-url">
<span class=action-icon><i class="fas fa-2x fa-link"></i></span> Copy URL
</a><a class="action action-social-share" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share">
<span class=action-icon><i class="fas fa-2x fa-share-alt"></i></span> Share
</a></section>
</div>
</div>
<div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent>
<form class="search-bar my-1" action=/en/search>
<div class="input-group input-group-sm">
<span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control rounded-pill" name=q type=search aria-label=Search>
</div>
</form>
<ul class="navbar-nav ms-auto"><li class=nav-item>
<a class=nav-link href=/en/series/>
<i class="fas fa-fw fa-columns"></i>Series
</a>
</li><li class=nav-item>
<a class=nav-link href=/en/archives/>
<i class="fas fa-fw fa-file-archive"></i>Archives
</a>
</li><li class=nav-item>
<a class=nav-link href=/en/categories/>
<i class="fas fa-fw fa-folder"></i>Categories
</a>
</li><li class=nav-item>
<a class=nav-link href=/en/tags/>
<i class="fas fa-fw fa-tags"></i>Tags
</a>
</li><li class=nav-item>
<a class=nav-link href=/>
</a>
</li></ul>
</div>
</div>
</nav>
</header>
<main role=main class=container>
<div class="row content">
<div class=col-lg-8>
<div class=container><nav class="row card component" aria-label=breadcrumb>
<div class=card-body>
<ol class=breadcrumb><li class=breadcrumb-item><a href=/en/>Home</a></li><li class=breadcrumb-item><a href=/en/posts/>Posts</a></li><li class="breadcrumb-item active">How to Evolve an Application to Make It More Robust and Maintainable - Setting Up the CICD</li></ol>
</div>
</nav><article class="row card component mb-4 post"><div class=post-panel-wrapper>
<div class="d-flex flex-column component rounded post-panel">
<a class="action action-panel-toggler" role=button title="Panel toggler">
<i class="fas fa-fw fa-chevron-circle-down"></i>
</a>
<a id=sidebarToggler class="action d-none d-lg-block" role=button title="Sidebar toggler">
<i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i>
</a>
<div class="post-translations nav-item dropdown dropstart action">
<a class="nav-link p-0" data-bs-toggle=dropdown href=# role=button aria-haspopup=true aria-expanded=false aria-label="Translations dropdown menu" title=Translations>
<i class="fas fa-fw fa-language"></i>
</a>
<div class=dropdown-menu><a class="dropdown-item post-translation" href=/fr/posts/how-to-evolve-application-cicd/>Français</a></div>
</div>
<a class=action href=#post-copyright role=button aria-label=Copyright title=Copyright>
<i class="fas fa-fw fa-copyright"></i>
</a>
<a class=action href=#post-comments role=button aria-label=Comments title=Comments>
<i class="fas fa-fw fa-comments"></i>
</a>
<a class=action data-bs-toggle=offcanvas href=#offcanvasTOC aria-controls=offcanvasTOC role=button title="Table of contents">
<i class="fas fa-fw fa-list-alt"></i>
</a>
</div>
</div>
<div class=card-header>
<h1 class="card-title post-title">How to Evolve an Application to Make It More Robust and Maintainable - Setting Up the CICD
</h1>
</div>
<div class=card-body><div class=post-meta>
<span class=post-date title="created on 2023-06-05 19:31:56 +0000 UTC.">
05-06-2023
</span><span class=post-reading-time>
6 min read
</span><span class=post-taxonomies><a href=/en/categories/quality/ class="badge rounded-pill post-taxonomy">quality</a><a href=/en/categories/test/ class="badge rounded-pill post-taxonomy">test</a><a href=/en/categories/cicd/ class="badge rounded-pill post-taxonomy">CICD</a><a href=/en/series/how-to-evolve-an-application-to-make-it-more-robust-and-maintainable/ class="badge rounded-pill post-taxonomy">How to evolve an application to make it more robust and maintainable</a></span>
</div>
<div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasTOC aria-labelledby=offcanvasTOCLabel>
<div class=offcanvas-header>
<h2 class=offcanvas-title id=offcanvasTOCLabel>Table Of Contents</h5>
<button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i>
</button>
</div>
<div class=offcanvas-body>
<nav id=TableOfContents>
<ul>
<li><a href=#foreword>Foreword</a></li>
<li><a href=#what-is-the-cicd>What is the CICD</a></li>
<li><a href=#what-cicd-tools>What CICD tools</a></li>
<li><a href=#implementation-of-our-cicd>Implementation of our CICD</a>
<ul>
<li><a href=#our-desired-pipeline>Our desired pipeline</a></li>
<li><a href=#implementation-with-circleci>Implementation with CircleCI</a></li>
<li><a href=#implementation-with-github-actions>Implementation with GitHub Actions</a></li>
<li><a href=#creation-of-jobs>Creation of jobs</a></li>
</ul>
</li>
<li><a href=#summary>Summary</a></li>
</ul>
</nav>
</div>
</div><div class="post-content mb-3"><h2 id=foreword>Foreword<a class="anchor ms-1" href=#foreword><i class="fas fa-link"></i></a></h2>
<p>In the last article we described the tests added to our project.
These tests are useful to check our development locally as we use TDD. But they are also useful to check if there are regressions.
In this post we will:</p>
<ul>
<li>define what the CICD is</li>
<li>How to add the CICD settings to our project</li>
</ul>
<h2 id=what-is-the-cicd>What is the CICD<a class="anchor ms-1" href=#what-is-the-cicd><i class="fas fa-link"></i></a></h2>
<p>The acronym CICD stands for Continuous Integration Continuous Delivery.
The acronym CICDCD stands for Continuous Integration Continuous Delivery Continuous Deployment</p>
<p>When we talk about CICD (or CICDCD) we often also refer to the pipelines.
A CICD pipeline defines a process where certain steps are executed one after the other, all with the aim of building, and verifying the application before delivering it and deploying it.</p>
<h2 id=what-cicd-tools>What CICD tools<a class="anchor ms-1" href=#what-cicd-tools><i class="fas fa-link"></i></a></h2>
<p>There are some tools to execute CICD; we can quote:</p>
<ul>
<li>Gitlab-ci</li>
<li>CircleCI</li>
<li>GitHub Action</li>
<li>Jenkins</li>
</ul>
<p>For open sources projects as our, it&rsquo;s easier to use a CICD tool integrated into a web hosting and software development management service such as GitLab or GitHub.
It&rsquo;s why we prefer to use GitLab, CircleCi or GitHub Actions
tools as Jenkins need a separate deployment, management and hardware resources.</p>
<p>We also want to use a free service, it is why we don&rsquo;t use a Gitlab CI; because we can&rsquo;t no longer push the report from Gitlab to Github withe the free plan.</p>
<p>In this post we will detail these solutions but we will implement only two of them:</p>
<ul>
<li>CircleCI</li>
<li>GitHub Action</li>
</ul>
<h2 id=implementation-of-our-cicd>Implementation of our CICD<a class="anchor ms-1" href=#implementation-of-our-cicd><i class="fas fa-link"></i></a></h2>
<h3 id=our-desired-pipeline>Our desired pipeline<a class="anchor ms-1" href=#our-desired-pipeline><i class="fas fa-link"></i></a></h3>
<p>Through our first pipeline we want to validate :</p>
<ul>
<li>build the application</li>
<li>check if the code is formatted</li>
<li>verify the non-regression of the code through the execution of test</li>
</ul>
<p>Also we want the pipeline to be run on every commit to the develop branch and the ci branches (with prefix ci_).
We could add other kind of branches: feature(feat_), fixes (fix_), documentation (doc_)</p>
<h3 id=implementation-with-circleci>Implementation with CircleCI<a class="anchor ms-1" href=#implementation-with-circleci><i class="fas fa-link"></i></a></h3>
<h4 id=first-connection>First connection<a class="anchor ms-1" href=#first-connection><i class="fas fa-link"></i></a></h4>
<p>CircleCI is a CICD platform which has a free plan;
To be able to use CircleCI we need to:</p>
<ul>
<li>
<p>Create an account</p>
<p><img class=img-fluid alt=circleci-create-user.png src=/en/posts/how-to-evolve-application-cicd/circleci-create-user.png loading=lazy width=535 height=521>
</p>
</li>
<li>
<p>Set up our code</p>
<p><img class=img-fluid alt=img.png src=/en/posts/how-to-evolve-application-cicd/img.png loading=lazy width=662 height=790>
</p>
</li>
<li>
<p>Configure</p>
</li>
</ul>
<p>There are tree possibilities to link your project with your future CI:</p>
<p><img class=img-fluid alt=circleci-create-settings.png src=/en/posts/how-to-evolve-application-cicd/circleci-create-settings.png loading=lazy width=484 height=405>
</p>
<h4 id=creation-of-a-job>Creation of a job<a class="anchor ms-1" href=#creation-of-a-job><i class="fas fa-link"></i></a></h4>
<p>CircleCI defines &ldquo;jobs&rdquo; which are executables tasks; each job can be divided into steps
In the first version of our CI (cf. code below) we want to:</p>
<ul>
<li>build the jar file</li>
<li>run the unit tests</li>
<li>run the integration tests</li>
<li>run the system test</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=ln>  1</span># Java Gradle CircleCI 2.0 configuration file
<span class=ln>  2</span># See: https://circleci.com/docs/2.0/language-java/
<span class=ln>  3</span>version: 2.1
<span class=ln>  4</span>
<span class=ln>  5</span>
<span class=ln>  6</span># Define a job to be invoked later in a workflow.
<span class=ln>  7</span># See: https://circleci.com/docs/2.0/configuration-reference/#jobs
<span class=ln>  8</span>jobs:
<span class=ln>  9</span>assemble:
<span class=ln> 10</span># Specify the execution environment. You can specify an image from Dockerhub or use one of our Convenience Images from CircleCI&#39;s Developer Hub.
<span class=ln> 11</span># See: https://circleci.com/docs/2.0/configuration-reference/#docker-machine-macos-windows-executor
<span class=ln> 12</span>docker:
<span class=ln> 13</span># specify the version you desire here
<span class=ln> 14</span>- image: cimg/openjdk:17.0.5
<span class=ln> 15</span>
<span class=ln> 16</span>      # Specify service dependencies here if necessary
<span class=ln> 17</span>      # CircleCI maintains a library of pre-built images
<span class=ln> 18</span>      # documented at https://circleci.com/docs/2.0/circleci-images/
<span class=ln> 19</span>      # - image: circleci/postgres:9.4
<span class=ln> 20</span>
<span class=ln> 21</span>    working_directory: ~/happraisal
<span class=ln> 22</span>
<span class=ln> 23</span>    environment:
<span class=ln> 24</span>      # Customize the JVM maximum heap limit
<span class=ln> 25</span>      JVM_OPTS: -Xmx3200m
<span class=ln> 26</span>      TERM: dumb
<span class=ln> 27</span>    # Add steps to the job
<span class=ln> 28</span>    # See: https://circleci.com/docs/2.0/configuration-reference/#steps
<span class=ln> 29</span>    steps:
<span class=ln> 30</span>      - checkout
<span class=ln> 31</span>      - attach_workspace:
<span class=ln> 32</span>          at: ~/happraisal
<span class=ln> 33</span>
<span class=ln> 34</span>      # Download and cache dependencies
<span class=ln> 35</span>      - restore_cache:
<span class=ln> 36</span>          keys:
<span class=ln> 37</span>            - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 38</span>            # fallback to using the latest cache if no exact match is found
<span class=ln> 39</span>            - v1-dependencies-
<span class=ln> 40</span>
<span class=ln> 41</span>      - run: ./gradlew assemble
<span class=ln> 42</span>
<span class=ln> 43</span>      - save_cache:
<span class=ln> 44</span>          paths:
<span class=ln> 45</span>            - ~/.gradle
<span class=ln> 46</span>          key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 47</span>      - persist_to_workspace:
<span class=ln> 48</span>          root: ~/happraisal
<span class=ln> 49</span>          paths:
<span class=ln> 50</span>            - ./build
<span class=ln> 51</span>      - store_artifacts:
<span class=ln> 52</span>          path: ~/happraisal/build/libs
<span class=ln> 53</span>
<span class=ln> 54</span>unit-tests:
<span class=ln> 55</span>docker:
<span class=ln> 56</span>- image: cimg/openjdk:17.0.5
<span class=ln> 57</span>
<span class=ln> 58</span>    working_directory: ~/happraisal
<span class=ln> 59</span>    steps:
<span class=ln> 60</span>        - checkout
<span class=ln> 61</span>        - restore_cache:
<span class=ln> 62</span>            keys:
<span class=ln> 63</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 64</span>              # fallback to using the latest cache if no exact match is found
<span class=ln> 65</span>              - v1-dependencies-
<span class=ln> 66</span>        - run: ./gradlew test
<span class=ln> 67</span>        - save_cache:
<span class=ln> 68</span>            paths:
<span class=ln> 69</span>              - ~/.gradle
<span class=ln> 70</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 71</span>        - store_test_results:
<span class=ln> 72</span>            path:  ~/happraisal/build/test-results
<span class=ln> 73</span>
<span class=ln> 74</span>
<span class=ln> 75</span>
<span class=ln> 76</span>integration-tests:
<span class=ln> 77</span>docker:
<span class=ln> 78</span>- image: cimg/openjdk:17.0.5
<span class=ln> 79</span>
<span class=ln> 80</span>    working_directory: ~/happraisal
<span class=ln> 81</span>    steps:
<span class=ln> 82</span>        - checkout
<span class=ln> 83</span>        - restore_cache:
<span class=ln> 84</span>            keys:
<span class=ln> 85</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 86</span>              # fallback to using the latest cache if no exact match is found
<span class=ln> 87</span>              - v1-dependencies-
<span class=ln> 88</span>        - run: ./gradlew integrationTest
<span class=ln> 89</span>        - save_cache:
<span class=ln> 90</span>            paths:
<span class=ln> 91</span>              - ~/.gradle
<span class=ln> 92</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln> 93</span>
<span class=ln> 94</span>
<span class=ln> 95</span>system-tests:
<span class=ln> 96</span>docker:
<span class=ln> 97</span>- image: cimg/openjdk:17.0.5
<span class=ln> 98</span>
<span class=ln> 99</span>    working_directory: ~/happraisal
<span class=ln>100</span>    steps:
<span class=ln>101</span>        - checkout
<span class=ln>102</span>        - restore_cache:
<span class=ln>103</span>            keys:
<span class=ln>104</span>              - v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln>105</span>              # fallback to using the latest cache if no exact match is found
<span class=ln>106</span>              - v1-dependencies-
<span class=ln>107</span>        - run: ./gradlew systemTest
<span class=ln>108</span>        - save_cache:
<span class=ln>109</span>            paths:
<span class=ln>110</span>              - ~/.gradle
<span class=ln>111</span>            key: v1-dependencies-{{ checksum &#34;build.gradle&#34; }}
<span class=ln>112</span>
<span class=ln>113</span>workflows:
<span class=ln>114</span>version: 2.1
<span class=ln>115</span>microservice:
<span class=ln>116</span>jobs:
<span class=ln>117</span>- assemble
<span class=ln>118</span>- unit-tests:
<span class=ln>119</span>requires:
<span class=ln>120</span>- assemble
<span class=ln>121</span>- integration-tests:
<span class=ln>122</span>requires:
<span class=ln>123</span>- assemble
<span class=ln>124</span>- system-tests:
<span class=ln>125</span>requires:
<span class=ln>126</span>- assemble
<span class=ln>127</span>
</code></pre></div><h3 id=implementation-with-github-actions>Implementation with GitHub Actions<a class="anchor ms-1" href=#implementation-with-github-actions><i class="fas fa-link"></i></a></h3>
<h4 id=terminology>Terminology<a class="anchor ms-1" href=#terminology><i class="fas fa-link"></i></a></h4>
<p>A Workflow: In the official documentation a workflow is defined as &ldquo;a configurable automated process that will execute one or more jobs.
It is set up via a yaml file. cf. <a href=https://docs.github.com/fr/actions/using-workflows/about-workflows target=_blank rel="noopener noreferrer">https://docs.github.com/fr/actions/using-workflows/about-workflows</a>
</p>
<p>Action: &ldquo;Actions are individual tasks that you can combine to create jobs and customize your workflow.&rdquo; cf. <a href=https://docs.github.com/fr/actions/creating-actions/about-custom-actions target=_blank rel="noopener noreferrer">https://docs.github.com/fr/actions/creating-actions/about-custom-actions</a>
</p>
<h4 id=first-connection-1>First connection<a class="anchor ms-1" href=#first-connection-1><i class="fas fa-link"></i></a></h4>
<p>GitHub Actions is the CI tool of GitHUb.
This CI is accessible from the Action button in a toolbar
<img class=img-fluid alt=github_action_menu.png src=/en/posts/how-to-evolve-application-cicd/github_action_menu.png loading=lazy width=1606 height=91>
</p>
<p>During the first access, GithUb Actions displays a workflow proposal according to your project.
In our case we have selected the java with gradle workflow.</p>
<p><img class=img-fluid alt=github_action_gradle.png src=/en/posts/how-to-evolve-application-cicd/github_action_gradle.png loading=lazy width=782 height=434>
</p>
<p>Once we have selected our workflow, we are redirected to the editor proposing us a default file.
It is possible to modify it and save it on a specific branch; In order to easily test the CICD without having to push on develop.
It is possible to define the name of the working branch in the part push.</p>
<p><img class=img-fluid alt=github_action_gradle_file.png src=/en/posts/how-to-evolve-application-cicd/github_action_gradle_file.png loading=lazy width=1189 height=446>
</p>
<h3 id=creation-of-jobs>Creation of jobs<a class="anchor ms-1" href=#creation-of-jobs><i class="fas fa-link"></i></a></h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=ln>1</span><span class=nt>on</span><span class=p>:</span><span class=w>
</span><span class=ln>2</span><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span><span class=ln>3</span><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span><span class=ln>4</span><span class=w>    </span>- <span class=l>develop</span><span class=w>
</span><span class=ln>5</span><span class=w>    </span>- <span class=l>ci_* </span><span class=w>
</span></code></pre></div><p>To implement the 3 steps defined above, we need to create the jobs:</p>
<ul>
<li>assemble: to compile the code and create the jar.</li>
<li>spotless: to check the format of new code.</li>
<li>unit-tests: to execute the unit tests.</li>
<li>integration-tests: to execute the integration tests.</li>
<li>system-tests: to execute the system tests.</li>
</ul>
<p>the code below shows an example of how to create a job</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=ln> 1</span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span><span class=ln> 2</span><span class=w>  </span><span class=nt>assemble</span><span class=p>:</span><span class=w>
</span><span class=ln> 3</span><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span><span class=ln> 4</span><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span><span class=ln> 5</span><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span><span class=ln> 6</span><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-java@v3</span><span class=w>
</span><span class=ln> 7</span><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span><span class=ln> 8</span><span class=w>        </span><span class=nt>java-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;17&#39;</span><span class=w>
</span><span class=ln> 9</span><span class=w>        </span><span class=nt>distribution</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;temurin&#39;</span><span class=w>
</span><span class=ln>10</span><span class=w>        </span><span class=nt>cache</span><span class=p>:</span><span class=w> </span><span class=l>gradle</span><span class=w>
</span><span class=ln>11</span><span class=w>    </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>./gradlew assemble --no-daemon</span><span class=w>
</span><span class=ln>12</span><span class=w>
</span></code></pre></div><p>In the code above:</p>
<ul>
<li>we create the assemble job which is based on ubuntu-latest</li>
<li>we use two actions to check the code and configure the Java compiler.</li>
<li>we run the gradle assemble job.</li>
</ul>
<h2 id=summary>Summary<a class="anchor ms-1" href=#summary><i class="fas fa-link"></i></a></h2>
<p>The first objective of this article was to test three CICD engines (GitLab, CircleCi and GitHub Actions), implementing similar pipelines.
While trying to implement the CICD on these engines, we quickly encountered some limitations for the first two CICD:</p>
<ul>
<li>pushing the report of the Gitlab CI to GitHub is not possible.</li>
<li>on CircleCi the maximum available space for the artefacts and their retention time were not compatible with our objectives.
<a href="https://app.circleci.com/settings/plan/github/talk-to-the-duck/overview?return-to=https%3A%2F%2Fapp.circleci.com%2Fprojects%2Fproject-dashboard%2Fgithub%2Ftalk-to-the-duck%2F" target=_blank rel="noopener noreferrer">https://app.circleci.com/settings/plan/github/talk-to-the-duck/overview?return-to=https%3A%2F%2Fapp.circleci.com%2Fprojects%2Fproject-dashboard%2Fgithub%2Ftalk-to-the-duck%2F</a>
In this case, only the GitHub action is completely useful.</li>
</ul>
<p>As a conclusion I think that to set up a free CICD, it is preferable to use a CI integrated with its version manager such as GItHub Actions for GitHub or GitLab CICD for GitLab.</p>
<p>If you have any remarks on the content or the form, you can leave a comment…it is by exchanging that we progress.</p></div><hr><div class=post-copyright id=post-copyright>
<a class="d-flex align-items-center flex-column" target=_blank rel="license noopener noreferrer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.en>
<span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
CC BY-NC-ND 4.0
</a>
</div>
<hr><div class="post-navs d-flex mb-3 justify-content-evenly">
<div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
<a href=/en/posts/what-is-code-formatting-and-why-does-it-matter/>What Is Code Formatting and Why Does It Matter
</a>
</div><div class="post-nav post-next">
<a href=/en/posts/what-is-an-api/>Introduction to APIs
</a>
<i class="fas fa-fw fa-chevron-right"></i>
</div></div></div>
</article><section class="related-posts row card component">
<div class=card-header>
<h2 class=card-title>Related Posts</h2>
</div>
<div class=card-body>
<ul class=post-list><li>
<a href=/en/posts/what-is-code-formatting-and-why-does-it-matter/>What Is Code Formatting and Why Does It Matter
</a>
<span class="float-end post-date">16-01-2023
</span>
</li><li>
<a href=/en/posts/how-to-evolve-application-tests/>How to Evolve an Application to Make It More Robust and Maintainable - Setting Up the Test
</a>
<span class="float-end post-date">09-01-2023
</span>
</li><li>
<a href=/en/posts/how-to-evolve-application-presentation/>How to Evolve an Application to Make It More Robust and Maintainable - Presentation
</a>
<span class="float-end post-date">15-01-2023
</span>
</li><li>
<a href=/en/about/>About
</a>
<span class="float-end post-date">13-01-2022
</span>
</li><li>
<a href=/en/contact/>
</a>
<span class="float-end post-date">01-01-0001
</span>
</li></ul>
</div>
</section><div class="card component row post-comments" id=post-comments>
<div class=card-header>
<h2 class=card-title>Comments</h2>
</div>
<div class=card-body></div>
</div></div>
</div><aside class="col-lg-4 sidebar d-flex">
<div class=container>
<section class="card row text-center profile component">
<div class=card-body>
<div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Talk To The Duck" src=/images/duck_120x120_square.png loading=lazy width=120 height=120>
</div>
<div class="col-12 profile-meta"><div class=profile-name>Talk To The Duck</div><div class=profile-bio>Explain to the Duck, you will understand.</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Paris, France</div><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=/en/about/>About</a></div><div class=profile-contact><i class="fas fa-fw fa-question-circle"></i><a href=/en/contact/></a></div></div>
</div>
</section>
<section class="recent-posts row card component">
<div class=card-header>
<h2 class=card-title>Recent Posts</h2>
</div>
<div class=card-body>
<ul class=post-list><li>
<a href=/en/posts/how-to-evolve-application-add-quality/>How to Evolve an Application to Make It More Robust and Maintainable - Add a Tool to Assess Code Quality
</a>
</li><li>
<a href=/en/posts/howto/how-to-use-sonarcloud/>How-To: Use Sonarcloud
</a>
</li><li>
<a href=/en/posts/what-is-an-api/>Introduction to APIs
</a>
</li><li>
<a href=/en/posts/how-to-evolve-application-cicd/>How to Evolve an Application to Make It More Robust and Maintainable - Setting Up the CICD
</a>
</li><li>
<a href=/en/posts/what-is-code-formatting-and-why-does-it-matter/>What Is Code Formatting and Why Does It Matter
</a>
</li></ul>
</div>
</section><section class="taxonomies row card component">
<div class=card-header>
<h2 class=card-title>
<a href=/en/categories>Categories</a>
</h2>
</div>
<div class=card-body>
<div class=py-2><a href=/en/categories/quality/ class="badge rounded post-taxonomy" title=quality>
quality
</a><a href=/en/categories/test/ class="badge rounded post-taxonomy" title=test>
test
</a><a href=/en/categories/cicd/ class="badge rounded post-taxonomy" title=CICD>
CICD
</a><a href=/en/categories/sonarqube/ class="badge rounded post-taxonomy" title=Sonarqube>
Sonarqube
</a><a href=/en/categories/api/ class="badge rounded post-taxonomy" title=API>
API
</a><a href=/en/categories/gradle/ class="badge rounded post-taxonomy" title=Gradle>
Gradle
</a><a href=/en/categories/how-to/ class="badge rounded post-taxonomy" title=How-To>
How-To
</a><a href=/en/categories/owasp/ class="badge rounded post-taxonomy" title=Owasp>
Owasp
</a></div>
</div>
</section><section class="taxonomies row card component">
<div class=card-header>
<h2 class=card-title>
<a href=/en/series>Series</a>
</h2>
</div>
<div class=card-body>
<div class=py-2><a href=/en/series/how-to-evolve-an-application-to-make-it-more-robust-and-maintainable/ class="badge rounded post-taxonomy" title="How to evolve an application to make it more robust and maintainable">
How to evolve an application to make it more robust and maintainable
</a><a href=/en/series/how-to/ class="badge rounded post-taxonomy" title=How-To>
How-To
</a><a href=/en/series/tools-for-java/ class="badge rounded post-taxonomy" title="Tools for Java">
Tools for Java
</a><a href=/en/series/working-with-apis/ class="badge rounded post-taxonomy" title="Working with APIs">
Working with APIs
</a></div>
</div>
</section><section class="taxonomies row card component">
<div class=card-header>
<h2 class=card-title>
<a href=/en/tags>Tags</a>
</h2>
</div>
<div class=card-body>
<div class=py-2><a href=/en/tags/how-to/ class="badge rounded post-taxonomy" title=How-To>
How-To
</a></div>
</div>
</section>
</div>
</aside>
</div>
</main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav justify-content-center mb-2"></nav>
<div class="copyright mb-2">
<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png></a><br>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
Copyright © 2021-2024 Talk To The Duck. All Rights Reserved.
</div>
</footer>
<script src=/js/main.min.d1ef5819d5055b58eaa52e77fc1c87e27b1a006bc5169ce78255477ef0bb2281.js integrity="sha256-0e9YGdUFW1jqpS53/ByH4nsaAGvFFpznglVHfvC7IoE=" crossorigin=anonymous defer></script><script src=/js/icons.min.a35670f2f90c398e5ee5c8e509b428fae75aa2746854cee10b60794633076859.js integrity="sha256-o1Zw8vkMOY5e5cjlCbQo+udaonRoVM7hC2B5RjMHaFk=" crossorigin=anonymous defer></script>
<script>'serviceWorker'in navigator&&window.addEventListener('load',()=>{navigator.serviceWorker.register('/service-worker.js').then(function(a){console.log('Successfully registered service worker',a)}).catch(function(a){console.warn('Error whilst registering service worker',a)})})</script><script src=/js/viewer.min.4dba52a0a790f909408b7385316651299158381686401d50ff1f04dda6476473.js integrity="sha256-TbpSoKeQ+QlAi3OFMWZRKZFYOBaGQB1Q/x8E3aZHZHM=" crossorigin=anonymous defer></script>
</body>
</html>